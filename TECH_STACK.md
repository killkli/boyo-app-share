# AI App Share - å–®é  HTML App å¿«é€Ÿåˆ†äº«å¹³å° - æŠ€è¡“æ¶æ§‹æ–¹æ¡ˆ

## é¸å®šæŠ€è¡“æ£§ï¼ˆZeabur + Cloudflare + Tebiï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä½¿ç”¨è€…ç€è¦½å™¨                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Cloudflare Pages (å‰ç«¯ CDN)                    â”‚
â”‚  - Next.js 14+ SSG/SSR                                  â”‚
â”‚  - ç„¡é™é »å¯¬                                             â”‚
â”‚  - å…¨çƒ CDN                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Zeabur (å¾Œç«¯ API + è³‡æ–™åº«)                      â”‚
â”‚  - Node.js/Express API                                  â”‚
â”‚  - PostgreSQL è³‡æ–™åº«                                    â”‚
â”‚  - èªè­‰æœå‹™                                             â”‚
â”‚  - $5/æœˆå…è²»é¡åº¦                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Tebi S3 (æª”æ¡ˆå„²å­˜)                             â”‚
â”‚  - HTML/CSS/JS æª”æ¡ˆ                                     â”‚
â”‚  - ç¸®åœ–åœ–ç‰‡                                             â”‚
â”‚  - 25GB å…è²»å„²å­˜                                        â”‚
â”‚  - 250GB å…è²»æµé‡/æœˆ                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å„æœå‹™è©³ç´°è¦æ ¼

### 1. Cloudflare Pages (å‰ç«¯éƒ¨ç½²)

#### å…è²»é¡åº¦
- âœ… **ç„¡é™é »å¯¬** (æœ€å¤§å„ªå‹¢ï¼)
- âœ… 500 æ¬¡ builds/æœˆ
- âœ… å…¨çƒ 300+ é‚Šç·£ç¯€é»
- âœ… è‡ªå‹• SSL è­‰æ›¸
- âœ… è‡ªå‹• HTTPS é‡å®šå‘
- âœ… æ”¯æ´è‡ªè¨‚åŸŸå

#### æ”¯æ´æ¡†æ¶
- Next.js (é€é @opennextjs/cloudflare)
- React
- Vue
- Svelte
- éœæ…‹ HTML

#### éƒ¨ç½²æ–¹å¼
```bash
# æ–¹æ³• 1: Git æ•´åˆï¼ˆæ¨è–¦ï¼‰
é€£æ¥ GitHub â†’ è‡ªå‹•éƒ¨ç½²

# æ–¹æ³• 2: CLI éƒ¨ç½²
npm install -g wrangler
wrangler pages deploy ./out
```

#### Next.js é…ç½®
```javascript
// next.config.js
module.exports = {
  output: 'export', // éœæ…‹åŒ¯å‡º
  images: {
    unoptimized: true, // Cloudflare ä¸æ”¯æ´ Image Optimization
  },
  trailingSlash: true,
}
```

---

### 2. Zeabur (å¾Œç«¯éƒ¨ç½²)

#### å…è²»é¡åº¦ï¼ˆFree Trialï¼‰
- ğŸ’° **$5/æœˆ é¡åº¦**
- ğŸ”§ æœ€é«˜ 1 vCPU + 2GB RAM/æœå‹™
- ğŸ“¦ ç„¡é™æœå‹™æ•¸é‡
- ğŸŒ ç¤¾ç¾¤æ”¯æ´
- ğŸ”„ è‡ªå‹•éƒ¨ç½²

#### è¨ˆè²»èªªæ˜
- **å‰ $5 å…è²»**ï¼Œè¶…éæ‰è¨ˆè²»
- ä¾å¯¦éš›ä½¿ç”¨é‡è¨ˆè²»ï¼ˆæŒ‰ç§’ï¼‰
- ç¯„ä¾‹ï¼š5 å€‹å°å°ˆæ¡ˆï¼ˆå„ 100MB RAMï¼‰â‰ˆ $5/æœˆ

#### æ”¯æ´æœå‹™
- Node.js / Express
- PostgreSQL / MySQL
- Redis
- Python / Go / Rust
- Docker å®¹å™¨

#### éƒ¨ç½²æ–¹å¼
```bash
# 1. å®‰è£ CLI
npm install -g @zeabur/cli

# 2. ç™»å…¥
zeabur auth login

# 3. éƒ¨ç½²
zeabur deploy
```

#### ä¸€éµéƒ¨ç½²æ¨¡æ¿
Zeabur Marketplace æä¾›é è¨­æ¨¡æ¿ï¼š
- Express + PostgreSQL
- Next.js Fullstack
- Strapi CMS
- Ghost Blog

---

### 3. Tebi S3 (æª”æ¡ˆå„²å­˜)

#### æ°¸ä¹…å…è²»é¡åº¦
- ğŸ’¾ **25GB å„²å­˜ç©ºé–“**
- ğŸ“¤ **250GB æµé‡/æœˆ**
- ğŸ”„ 2 ä»½è³‡æ–™å‚™ä»½
- ğŸŒ æ­æ´²è³‡æ–™ä¸­å¿ƒï¼ˆGDPR åˆè¦ï¼‰
- ğŸ†“ API å‘¼å«å…è²»

#### 14 å¤©è©¦ç”¨
- 2TB å„²å­˜
- 8TB æµé‡
- ç„¡éœ€ä¿¡ç”¨å¡

#### è¶…é¡è¨ˆè²»
| é …ç›® | åƒ¹æ ¼ |
|------|------|
| é¡å¤–å„²å­˜ | $0.02/GB/æœˆ |
| é¡å¤–æµé‡ | $0.01/GB |
| API å‘¼å« | å…è²» |

#### S3 ç›¸å®¹æ€§
å®Œå…¨ç›¸å®¹ AWS S3 APIï¼š
- PUT / GET / DELETE
- Bucket ç®¡ç†
- ACL æ¬Šé™æ§åˆ¶
- CORS è¨­å®š

#### SDK ç¯„ä¾‹
```javascript
// Node.js with AWS SDK v3
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3'

const s3 = new S3Client({
  region: 'auto',
  endpoint: 'https://s3.tebi.io',
  credentials: {
    accessKeyId: process.env.TEBI_ACCESS_KEY,
    secretAccessKey: process.env.TEBI_SECRET_KEY,
  },
})

// ä¸Šå‚³æª”æ¡ˆ
await s3.send(new PutObjectCommand({
  Bucket: 'ai-app-share',
  Key: 'apps/app-123.html',
  Body: htmlContent,
  ContentType: 'text/html',
  ACL: 'public-read',
}))

// æª”æ¡ˆ URL
const fileUrl = `https://s3.tebi.io/ai-app-share/apps/app-123.html`
```

---

## å®Œæ•´æ¶æ§‹è¨­è¨ˆ

### å‰ç«¯ (Cloudflare Pages)

#### æŠ€è¡“æ£§
- **æ¡†æ¶**: Next.js 14 (App Router)
- **UI**: TailwindCSS + shadcn/ui
- **ç‹€æ…‹ç®¡ç†**: Zustand
- **è¡¨å–®**: React Hook Form + Zod
- **ç·¨è¼¯å™¨**: Monaco Editor
- **HTTP å®¢æˆ¶ç«¯**: Axios / Fetch

#### ç›®éŒ„çµæ§‹
```
cloudflare-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # é¦–é 
â”‚   â”‚   â”œâ”€â”€ explore/
â”‚   â”‚   â”œâ”€â”€ app/[id]/
â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â””â”€â”€ profile/[username]/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                   # shadcn/ui
â”‚   â”‚   â”œâ”€â”€ AppCard.tsx
â”‚   â”‚   â”œâ”€â”€ AppEditor.tsx
â”‚   â”‚   â””â”€â”€ AppPreview.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api.ts                # API å®¢æˆ¶ç«¯
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â””â”€â”€ styles/
â”œâ”€â”€ public/
â”œâ”€â”€ next.config.js
â””â”€â”€ package.json
```

---

### å¾Œç«¯ (Zeabur)

#### æŠ€è¡“æ£§
- **æ¡†æ¶**: Express.js + TypeScript
- **ORM**: Prisma
- **è³‡æ–™åº«**: PostgreSQL 15
- **èªè­‰**: JWT + bcrypt
- **é©—è­‰**: Zod
- **æª”æ¡ˆä¸Šå‚³**: multer â†’ Tebi S3

#### ç›®éŒ„çµæ§‹
```
zeabur-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.ts               # èªè­‰è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ apps.ts               # APP CRUD
â”‚   â”‚   â”œâ”€â”€ users.ts
â”‚   â”‚   â”œâ”€â”€ ratings.ts
â”‚   â”‚   â””â”€â”€ comments.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.ts               # JWT é©—è­‰
â”‚   â”‚   â”œâ”€â”€ upload.ts             # æª”æ¡ˆä¸Šå‚³
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ s3.service.ts         # Tebi S3 æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ app.service.ts
â”‚   â”‚   â””â”€â”€ user.service.ts
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ schema.prisma
â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â”œâ”€â”€ utils/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ .env
â”œâ”€â”€ Dockerfile                     # Zeabur éƒ¨ç½²
â”œâ”€â”€ zeabur.yaml
â””â”€â”€ package.json
```

#### Zeabur é…ç½®æª”
```yaml
# zeabur.yaml
name: ai-app-share-backend
services:
  - name: api
    type: nodejs
    buildCommand: npm run build
    startCommand: npm start
    env:
      - DATABASE_URL=${DATABASE_URL}
      - JWT_SECRET=${JWT_SECRET}
      - TEBI_ACCESS_KEY=${TEBI_ACCESS_KEY}
      - TEBI_SECRET_KEY=${TEBI_SECRET_KEY}

  - name: postgres
    type: postgresql
    plan: free
```

---

## è³‡æ–™åº«è¨­è¨ˆ (PostgreSQL on Zeabur)

### Schema
```sql
-- Users
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  username VARCHAR(50) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  avatar_url TEXT,
  bio TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Apps
CREATE TABLE apps (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  title VARCHAR(255) NOT NULL,
  description TEXT,
  category VARCHAR(50),
  tags TEXT[],

  -- S3 å„²å­˜è·¯å¾‘
  html_s3_key TEXT NOT NULL,        -- e.g., "apps/uuid/index.html"
  thumbnail_s3_key TEXT,             -- e.g., "thumbnails/uuid.png"

  -- å…ƒæ•¸æ“š
  is_public BOOLEAN DEFAULT true,
  view_count INTEGER DEFAULT 0,
  like_count INTEGER DEFAULT 0,

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_apps_user_id ON apps(user_id);
CREATE INDEX idx_apps_category ON apps(category);
CREATE INDEX idx_apps_created_at ON apps(created_at DESC);

-- Ratings
CREATE TABLE ratings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  app_id UUID REFERENCES apps(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  rating INTEGER CHECK (rating >= 1 AND rating <= 5),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(app_id, user_id)
);

-- Comments
CREATE TABLE comments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  app_id UUID REFERENCES apps(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Favorites
CREATE TABLE favorites (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  app_id UUID REFERENCES apps(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(app_id, user_id)
);
```

---

## æª”æ¡ˆå„²å­˜ç­–ç•¥ (Tebi S3)

### Bucket çµæ§‹
```
ai-app-share/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ {uuid}/
â”‚   â”‚   â”œâ”€â”€ index.html          # ä¸»æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ style.css           # (å¯é¸)
â”‚   â”‚   â””â”€â”€ script.js           # (å¯é¸)
â”œâ”€â”€ thumbnails/
â”‚   â”œâ”€â”€ {uuid}.png              # ç¸®åœ–
â””â”€â”€ avatars/
    â””â”€â”€ {user-uuid}.jpg         # ä½¿ç”¨è€…é ­åƒ
```

### URL ç¯„ä¾‹
```
HTML æª”æ¡ˆ: https://s3.tebi.io/ai-app-share/apps/{uuid}/index.html
ç¸®åœ–: https://s3.tebi.io/ai-app-share/thumbnails/{uuid}.png
```

### CORS è¨­å®š
```json
{
  "CORSRules": [
    {
      "AllowedOrigins": ["https://your-domain.pages.dev"],
      "AllowedMethods": ["GET", "HEAD"],
      "AllowedHeaders": ["*"]
    }
  ]
}
```

---

## API è¨­è¨ˆ

### RESTful Endpoints

#### èªè­‰
```
POST   /api/auth/register       # è¨»å†Š
POST   /api/auth/login          # ç™»å…¥
POST   /api/auth/logout         # ç™»å‡º
GET    /api/auth/me             # ç²å–ç•¶å‰ä½¿ç”¨è€…
```

#### APP ç®¡ç†
```
GET    /api/apps                # åˆ—è¡¨ï¼ˆæ”¯æ´åˆ†é ã€ç¯©é¸ï¼‰
GET    /api/apps/:id            # è©³æƒ…
POST   /api/apps                # å‰µå»ºï¼ˆä¸Šå‚³åˆ° S3ï¼‰
PUT    /api/apps/:id            # æ›´æ–°
DELETE /api/apps/:id            # åˆªé™¤ï¼ˆåŒæ™‚åˆªé™¤ S3 æª”æ¡ˆï¼‰
GET    /api/apps/:id/preview    # é è¦½ URL
```

#### äº’å‹•
```
POST   /api/apps/:id/rate       # è©•åˆ†
POST   /api/apps/:id/comment    # è©•è«–
POST   /api/apps/:id/favorite   # æ”¶è—
DELETE /api/apps/:id/favorite   # å–æ¶ˆæ”¶è—
```

#### ä½¿ç”¨è€…
```
GET    /api/users/:username     # ä½¿ç”¨è€…è³‡æ–™
GET    /api/users/:username/apps # ä½¿ç”¨è€…çš„ APP
```

---

## éƒ¨ç½²æµç¨‹

### 1. å‰ç«¯éƒ¨ç½² (Cloudflare Pages)

```bash
# 1. å»ºæ§‹å°ˆæ¡ˆ
npm run build

# 2. é€£æ¥ GitHubï¼ˆè‡ªå‹•éƒ¨ç½²ï¼‰
# åœ¨ Cloudflare Dashboard è¨­å®š

# æˆ–ä½¿ç”¨ Wrangler CLI
npx wrangler pages deploy ./out
```

**ç’°å¢ƒè®Šæ•¸**:
```
NEXT_PUBLIC_API_URL=https://your-app.zeabur.app
```

---

### 2. å¾Œç«¯éƒ¨ç½² (Zeabur)

```bash
# æ–¹æ³• 1: GitHub æ•´åˆï¼ˆæ¨è–¦ï¼‰
1. é€£æ¥ GitHub å€‰åº«
2. Zeabur è‡ªå‹•åµæ¸¬ä¸¦éƒ¨ç½²

# æ–¹æ³• 2: CLI éƒ¨ç½²
zeabur deploy
```

**ç’°å¢ƒè®Šæ•¸**:
```bash
DATABASE_URL=postgresql://...        # Zeabur è‡ªå‹•æä¾›
JWT_SECRET=your-secret-key
TEBI_ACCESS_KEY=your-access-key
TEBI_SECRET_KEY=your-secret-key
TEBI_BUCKET=ai-app-share
TEBI_ENDPOINT=https://s3.tebi.io
FRONTEND_URL=https://your-app.pages.dev
```

---

### 3. è³‡æ–™åº«éƒ¨ç½² (PostgreSQL on Zeabur)

```bash
# 1. åœ¨ Zeabur Dashboard æ–°å¢ PostgreSQL æœå‹™
# 2. é€£æ¥åˆ° API æœå‹™ï¼ˆè‡ªå‹•æ³¨å…¥ DATABASE_URLï¼‰

# 3. åŸ·è¡Œé·ç§»
npx prisma migrate deploy
```

---

### 4. è¨­å®š Tebi S3

```bash
# 1. è¨»å†Š Tebi å¸³è™Ÿ
# 2. å‰µå»º Bucket: ai-app-share
# 3. è¨­å®š Public Read æ¬Šé™
# 4. è¨­å®š CORS

# 5. ç²å– Access Key å’Œ Secret Key
# åŠ å…¥ Zeabur ç’°å¢ƒè®Šæ•¸
```

---

## æˆæœ¬ä¼°ç®—

### å…è²»é¡åº¦è¶³å¤ å—ï¼Ÿ

#### å°å‹å°ˆæ¡ˆ (0-1000 ä½¿ç”¨è€…)
| æœå‹™ | ä½¿ç”¨é‡ | æˆæœ¬ |
|------|--------|------|
| Cloudflare Pages | 100K è¨ªå•/æœˆ | **$0** |
| Zeabur | 1 API (512MB RAM) + 1 DB | **$0** (åœ¨ $5 é¡åº¦å…§) |
| Tebi S3 | 10GB å„²å­˜ + 100GB æµé‡ | **$0** |
| **ç¸½è¨ˆ** | | **$0/æœˆ** âœ… |

#### ä¸­å‹å°ˆæ¡ˆ (1000-10000 ä½¿ç”¨è€…)
| æœå‹™ | ä½¿ç”¨é‡ | æˆæœ¬ |
|------|--------|------|
| Cloudflare Pages | 1M è¨ªå•/æœˆ | **$0** |
| Zeabur | API (1GB RAM) + DB | **~$8-10/æœˆ** |
| Tebi S3 | 50GB å„²å­˜ + 500GB æµé‡ | **~$5-7/æœˆ** |
| **ç¸½è¨ˆ** | | **~$13-17/æœˆ** |

#### å¤§å‹å°ˆæ¡ˆ (10000+ ä½¿ç”¨è€…)
è€ƒæ…®å‡ç´šåˆ°ï¼š
- Zeabur Team Plan ($80/æœˆ)
- Tebi æ›´é«˜å„²å­˜æ–¹æ¡ˆ
- Cloudflare Pro (å¯é¸)

---

## å„ªå‹¢åˆ†æ

### âœ… é€™å€‹çµ„åˆçš„å„ªé»

1. **å®Œå…¨å…è²»èµ·æ­¥**
   - å‰æœŸ $0 æˆæœ¬
   - é©åˆ MVP å’Œæ¸¬è©¦

2. **ç„¡é™å‰ç«¯æµé‡**
   - Cloudflare ç„¡é »å¯¬é™åˆ¶
   - å…¨çƒ CDN åŠ é€Ÿ

3. **S3 ç›¸å®¹**
   - Tebi å®Œå…¨ç›¸å®¹ AWS S3
   - æœªä¾†å¯è¼•é¬†é·ç§»

4. **ç°¡å–®éƒ¨ç½²**
   - Zeabur ä¸€éµéƒ¨ç½²
   - GitHub è‡ªå‹•åŒæ­¥

5. **å¯æ“´å±•æ€§**
   - éš¨éœ€ä»˜è²»
   - å¹³æ»‘å‡ç´š

### âš ï¸ éœ€è¦æ³¨æ„

1. **Zeabur å…è²»é¡åº¦æœ‰é™**
   - è¶…é $5/æœˆ éœ€ä»˜è²»
   - å»ºè­°ç›£æ§ç”¨é‡

2. **Tebi æµé‡é™åˆ¶**
   - å…è²» 250GB/æœˆ
   - è¶…é $0.01/GB

3. **Cloudflare Pages é™åˆ¶**
   - Next.js Image Optimization ä¸æ”¯æ´
   - éœ€ä½¿ç”¨ `output: 'export'`

---

## é–‹ç™¼å·¥ä½œæµç¨‹

```mermaid
graph LR
    A[æœ¬åœ°é–‹ç™¼] --> B[Git Push]
    B --> C{æœå‹™åˆ¤æ–·}
    C -->|å‰ç«¯| D[Cloudflare è‡ªå‹•éƒ¨ç½²]
    C -->|å¾Œç«¯| E[Zeabur è‡ªå‹•éƒ¨ç½²]
    D --> F[å‰ç«¯ä¸Šç·š]
    E --> G[å¾Œç«¯ä¸Šç·š]
    G --> H[PostgreSQL é·ç§»]
```

---

## å®‰å…¨å»ºè­°

### 1. ç’°å¢ƒè®Šæ•¸ç®¡ç†
```bash
# å‰ç«¯ (.env.local)
NEXT_PUBLIC_API_URL=https://api.your-domain.com

# å¾Œç«¯ (Zeabur Dashboard)
DATABASE_URL=postgresql://...
JWT_SECRET=strong-random-string-here
TEBI_ACCESS_KEY=***
TEBI_SECRET_KEY=***
```

### 2. S3 æ¬Šé™æ§åˆ¶
```javascript
// å…¬é–‹è®€å–ï¼Œç§æœ‰å¯«å…¥
ACL: 'public-read'

// ä½¿ç”¨ç°½å URL ä¸Šå‚³ï¼ˆæ›´å®‰å…¨ï¼‰
const signedUrl = await s3.getSignedUrlPromise('putObject', {
  Bucket: 'ai-app-share',
  Key: `apps/${uuid}/index.html`,
  Expires: 3600, // 1 å°æ™‚æœ‰æ•ˆ
})
```

### 3. HTML Sanitization
```javascript
import DOMPurify from 'isomorphic-dompurify'

// æ¸…ç†ä½¿ç”¨è€…ä¸Šå‚³çš„ HTML
const cleanHtml = DOMPurify.sanitize(userHtml, {
  ALLOWED_TAGS: ['div', 'span', 'p', 'h1', 'h2', 'button'],
  ALLOWED_ATTR: ['class', 'id', 'style'],
})
```

### 4. Rate Limiting
```javascript
import rateLimit from 'express-rate-limit'

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 åˆ†é˜
  max: 100, // æœ€å¤š 100 å€‹è«‹æ±‚
})

app.use('/api/', limiter)
```

---

## ç›£æ§èˆ‡åˆ†æ

### Cloudflare Web Analytics
```html
<!-- å…è²»ï¼Œéš±ç§å‹å¥½ -->
<script defer src='https://static.cloudflareinsights.com/beacon.min.js'
        data-cf-beacon='{"token": "your-token"}'></script>
```

### Zeabur Logs
```bash
# æŸ¥çœ‹å³æ™‚æ—¥èªŒ
zeabur logs -f

# æŸ¥çœ‹æ­·å²æ—¥èªŒ
zeabur logs --tail 100
```

---

## ä¸‹ä¸€æ­¥

æº–å‚™é–‹å§‹å¯¦æ–½äº†å—ï¼Ÿæˆ‘å¯ä»¥å¹«ä½ ï¼š

1. **åˆå§‹åŒ–å°ˆæ¡ˆ** - å»ºç«‹å‰å¾Œç«¯æ¶æ§‹
2. **è¨­å®šç’°å¢ƒ** - Zeaburã€Tebiã€Cloudflare è¨­å®š
3. **å¯¦ä½œæ ¸å¿ƒåŠŸèƒ½** - èªè­‰ã€ä¸Šå‚³ã€ç€è¦½
4. **éƒ¨ç½²ä¸Šç·š** - å®Œæ•´éƒ¨ç½²æµç¨‹

ä½ æƒ³å¾å“ªè£¡é–‹å§‹ï¼Ÿ
